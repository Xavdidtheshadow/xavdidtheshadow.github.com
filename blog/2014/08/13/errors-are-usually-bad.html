<!DOCTYPE html>
<!--[if lt IE 7]>
  <html class="no-js lt-ie9 lt-ie8 lt-ie7">
<![endif]-->
<!--[if IE 7]>
  <html class="no-js lt-ie9 lt-ie8">
<![endif]-->
<!--[if IE 8]>
  <html class="no-js lt-ie9 lt-ie8">
<![endif]-->
<!--[if gt IE 8]>
  <!--> <html class="no-js"> <!--
<![endif]-->
<head>
  <!-- You're looking at my site's source! That's pretty cool. It's pretty straightforward. Template taken from HTML5Boilderplate, css adapted to my liking. -->
  <!-- This site was laregely designed by Jennifer Herzberg, who rules. -->
  <meta charset='utf-8'>
  <!-- hyphens are dumb -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>
    Errors Are Usually Bad! A Cautionary Tale - David Brownman dot com
  </title>
  <meta content='Personal site for David Brownman' name='description'>
  <meta content='width=device-width' name='viewport'>
  <link href="../../../../css/the.css" rel="stylesheet" /><link href="../../../../css/code.css" rel="stylesheet" /><link href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet" />
  <script src="https://code.jquery.com/jquery-2.2.4.min.js"></script><script src="../../../../js/facts.js"></script>
</head>
<body>
  <!--[if lt IE 7]>
    <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/?locale=en/">upgrade your browser</a>.
  <![endif]-->
  <div class='page'>
    <div class='header-container'>
      <div class='wrapper clearfix'>
        <h1 class='title'>
          <a href='/index.html' id='zero'>
            <span class='my_name'>
              David Brownman
            </span>
          </a>
        </h1>
        <nav>
          <ul>
            <li>
              <a class='short' href='/index.html' id='ichi'>
                Home
              </a>
            </li>
            <li>
              <a class='short' href='/blog.html' id='ni'>
                Blog
              </a>
            </li>
            <li>
              <a class='long' href='/projects.html' id='san'>
                Projects
              </a>
            </li>
            <li>
              <a class='long' href='/misc.html' id='shi'>
                Sundries
              </a>
            </li>
          </ul>
        </nav>
      </div>
    </div>
    <div class='main-container'>
      <div class='main wrapper clearfix'>
        <p>The worst part about programming is that the computer does exactly what you tell it to. <em>Exactly</em>. </p>
        
        <p>Here at <a href="https://www.relateiq.com/">RelateIQ</a> I work in <strong>Internal Tools</strong>, or building products for other employees. My most recent project has involved a pythong script moving data out of a database and into the product itself so a bunch of users could be slung through our new Marketo integration and contacted. </p>
        
        <p>These jobs usually take a couple of hours to run, so we stick them in <a href="https://www.docker.com/">Docker</a> containers and let <a href="https://github.com/airbnb/chronos">Cronos</a> take care of the rest. Because I wanted to make sure that the initial population run actually finished, I put an unusually aggressive <code>try-except</code> block in the code in the hope that it would gloss over any weird corner cases and legacy data. It looked something like this: </p>
        <pre class="highlight plaintext"><code>for user in users: &#x000A;    try:&#x000A;        uid = str(user['_id'])&#x000A;        if uid in user_hash:&#x000A;            # process and save the user object&#x000A;&#x000A;        print "finished %s" % uid&#x000A;&#x000A;    except:&#x000A;        print "error %s" % uid&#x000A;</code></pre>
        
        <p>And this looked great. It was nigh unstoppable! </p>
        
        <p>Before I put it in the container and pushed, I wanted to run it just to make sure everything was smooth. I fired it up and after some promising logging messages, I saw lots of successes. </p>
        <pre class="highlight plaintext"><code>=================&#x000A;Begin IUL.py&#x000A;=================&#x000A;finished 0&#x000A;finished 1&#x000A;finished 2&#x000A;finished 3&#x000A;finished 4&#x000A;finished 5&#x000A;finished 5&#x000A;...&#x000A;</code></pre>
        
        <p>And so forth. Great! Now I just need to kill the execution and run my build script and I&#39;ll be on my way. I hit Control+C and watched the interrupt get registered and ignored. </p>
        <pre class="highlight plaintext"><code>^C error 8&#x000A;^C error 9&#x000A;^C error 10&#x000A;^C error 11    &#x000A;^C error 12&#x000A;finished 13&#x000A;finished 14&#x000A;...&#x000A;</code></pre>
        
        <p>&quot;That&#39;s interesting!&quot;, I thought with increasing trepidation. Ctrl+C was supposed to be my magic bullet, my ace in the hole for rescuing me from any terminal process that I had tricked myself into. Speaking to the <a href="https://en.wikipedia.org/wiki/Rubber_duck_debugging">rubber duck</a> on my desk I explained how &quot;It&#39;s weird, because python is clearly <em>seeing</em> the error happen because the message is changing accordingly, so the erro... oh.&quot;</p>
        
        <p>Python was seeing the error, and it was doing exactly what I told it to. When a python script is ordered to stop, it registers a <a href="https://docs.python.org/2/library/exceptions.html#exceptions.KeyboardInterrupt">KeyboardInterrupt</a> and acts accordingly. Unfortunately, that KeyboardInterrupt was being eaten up with anything else that could go wrong and was being ignored. </p>
        
        <p>A process kill and a quick addendum fixed my dumb problem and the script ran as normal after that. It just goes to show-</p>
        
        <p><em>Be careful what you wish for, because you just might get it!</em></p>
      </div>
    </div>
    <div class='footer-container'>
      <footer class='wrapper'>
        <div class='feet'>
          <ul>
            <li>
              <a href='/'>
                <i class='fa fa-home fa-2x'></i>
              </a>
            </li>
            <li>
              <a href='http://blog.davidbrownman.com' target='_blank'>
                <i class='fa fa-tumblr-square fa-2x'></i>
                <span class='sitename'>
                  Blog Archive
                </span>
              </a>
            </li>
            <li>
              <a href='mailto:beamneocube@gmail.com' target='_blank'>
                <i class='fa fa-envelope fa-2x'></i>
                <span class='sitename'>
                  Email
                </span>
              </a>
            </li>
            <li>
              <a href='https://www.github.com/xavdid' target='_blank'>
                <i class='fa fa-github-alt fa-2x'></i>
                <span class='sitename'>
                  GitHub
                </span>
              </a>
            </li>
            <li>
              <a href='https://www.twitter.com/xavdid' target='_blank'>
                <i class='fa fa-twitter-square fa-2x'></i>
                <span class='sitename'>
                  Twitter
                </span>
              </a>
            </li>
            <li>
              <a href='https://www.linkedin.com/in/xavdid' target='_blank'>
                <i class='fa fa-linkedin-square fa-2x'></i>
                <span class='sitename'>
                  Linkedin
                </span>
              </a>
            </li>
          </ul>
        </div>
      </footer>
    </div>
  </div>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-40842533-1', 'davidbrownman.com');
    ga('send', 'pageview');
  </script>
</body>
