<!DOCTYPE html>
<!--[if lt IE 7]>
<html class="no-js lt-ie9 lt-ie8 lt-ie7">
<![endif]-->
<!--[if IE 7]>
<html class="no-js lt-ie9 lt-ie8">
<![endif]-->
<!--[if IE 8]>
<html class="no-js lt-ie9 lt-ie8">
<![endif]-->
<!--[if gt IE 8]>
<!--> <html class="no-js"> <!--
<![endif]-->
<head>
<!-- You're looking at my site's source! That's pretty cool. It's pretty straightforward. Template taken from HTML5Boilderplate, css adapted to my liking. -->
<!-- This site was laregely designed by Jennifer Herzberg, who rules. -->
<meta charset='utf-8'>
<!-- hyphens are dumb -->
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>
Errors Are Usually Bad! A Cautionary Tale - David Brownman dot com
</title>
<meta content='Personal site for David Brownman' name='description'>
<meta content='width=device-width' name='viewport'>
<link href="../../../../../css/the-919e2fa6.css" rel="stylesheet" /><link href="../../../../../css/code-5ba1ac12.css" rel="stylesheet" /><link href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet" />
<script src="https://code.jquery.com/jquery-2.2.4.min.js"></script><script src="../../../../../js/facts-dfa7c003.js"></script>
<link href="../../../../../img/favicon.ico" rel="icon" type="image/ico" />
<script>
  if (window.location.protocol != "https:") {
    var url = "https:" + window.location.href.substring(window.location.protocol.length);
    window.location.href = url;
  }
</script>
</head>
<body>
<!--[if lt IE 7]>
<p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/?locale=en/">upgrade your browser</a>.
<![endif]-->
<div class='border'></div>
<div class='page'>
<div class='header-container'>
<header class='wrapper clearfix'>
<h1 class='title'>
<a href='/'>
<span class='my_name'>
David Brownman
</span>
</a>
</h1>
<nav>
<ul>
<li>
<a class='short' href='/'>
Home
</a>
</li>
<li>
<a class='active short' href='/blog'>
Blog
</a>
</li>
<li>
<a class='long' href='/projects'>
Projects
</a>
</li>
<li>
<a class='long' href='/misc'>
Sundries
</a>
</li>
</ul>
</nav>
</header>
</div>
<div class='main-container'>
<div class='main clearfix wrapper'>
<article>
<div class='blog_post'>
<h1>
Errors Are Usually Bad! A Cautionary Tale
</h1>
<div class='blog_body'>
<p>The worst part about programming is that the computer does exactly what you tell it to. <em>Exactly</em>.</p>

<p>Here at <a href="https://www.relateiq.com/">RelateIQ</a> I work in <strong>Internal Tools</strong>, or building products for other employees. My most recent project has involved a pythong script moving data out of a database and into the product itself so a bunch of users could be slung through our new Marketo integration and contacted.</p>

<p></p>

<p>These jobs usually take a couple of hours to run, so we stick them in <a href="https://www.docker.com/">Docker</a> containers and let <a href="https://github.com/airbnb/chronos">Cronos</a> take care of the rest. Because I wanted to make sure that the initial population run actually finished, I put an unusually aggressive <code>try-except</code> block in the code in the hope that it would gloss over any weird corner cases and legacy data. It looked something like this:</p>
<pre class="highlight python"><code><span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">users</span><span class="p">:</span>&#x000A;    <span class="k">try</span><span class="p">:</span>&#x000A;        <span class="n">uid</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">user</span><span class="p">[</span><span class="s">'_id'</span><span class="p">])</span>&#x000A;        <span class="k">if</span> <span class="n">uid</span> <span class="ow">in</span> <span class="n">user_hash</span><span class="p">:</span>&#x000A;        <span class="c"># process and save the user object</span>&#x000A;&#x000A;        <span class="k">print</span> <span class="s">"finished </span><span class="si">%</span><span class="s">s"</span> <span class="o">%</span> <span class="n">uid</span>&#x000A;&#x000A;    <span class="k">except</span><span class="p">:</span>&#x000A;        <span class="k">print</span> <span class="s">"error </span><span class="si">%</span><span class="s">s"</span> <span class="o">%</span> <span class="n">uid</span>&#x000A;</code></pre>

<p>And this looked great. It was nigh unstoppable!</p>

<p>Before I put it in the container and pushed, I wanted to run it just to make sure everything was smooth. I fired it up and after some promising logging messages, I saw lots of successes.</p>
<pre class="highlight plaintext"><code>=================&#x000A;Begin IUL.py&#x000A;=================&#x000A;finished 0&#x000A;finished 1&#x000A;finished 2&#x000A;finished 3&#x000A;finished 4&#x000A;finished 5&#x000A;finished 5&#x000A;...&#x000A;</code></pre>

<p>And so forth. Great! Now I just need to kill the execution and run my build script and I&#39;ll be on my way. I hit Control+C and watched the interrupt get registered and ignored.</p>
<pre class="highlight plaintext"><code>^C error 8&#x000A;^C error 9&#x000A;^C error 10&#x000A;^C error 11&#x000A;^C error 12&#x000A;finished 13&#x000A;finished 14&#x000A;...&#x000A;</code></pre>

<p>&quot;That&#39;s interesting!&quot;, I thought with increasing trepidation. Ctrl+C was supposed to be my magic bullet, my ace in the hole for rescuing me from any terminal process that I had tricked myself into. Speaking to the <a href="https://en.wikipedia.org/wiki/Rubber_duck_debugging">rubber duck</a> on my desk I explained how &quot;It&#39;s weird, because python is clearly <em>seeing</em> the error happen because the message is changing accordingly, so the erro... oh.&quot;</p>

<p>Python was seeing the error, and it was doing exactly what I told it to. When a python script is ordered to stop, it registers a <a href="https://docs.python.org/2/library/exceptions.html#exceptions.KeyboardInterrupt">KeyboardInterrupt</a> and acts accordingly. Unfortunately, that KeyboardInterrupt was being eaten up with anything else that could go wrong and was being ignored.</p>

<p>A process kill and a quick addendum fixed my dumb problem and the script ran as normal after that. It just goes to show-</p>

<p><em>Be careful what you wish for, because you just might get it!</em></p>

</div>
</div>
<hr>
<p>
<i class='fa fa-arrow-left'></i>
<a href="/blog">Blog Index</a>
|
<a href="/blog/2013/10/09/habbo-you-tell-me-how">Random Post</a>
<i class='fa fa-random'></i>
</p>
</article>
<aside>
<div class='top'>
<div class='heading'>
Published
<time>
August 13, 2014
</time>
</div>
</div>
<div class='bottom'>
<p>
tags:
<a href="/tags#programming">programming</a>, <a href="/tags#python">python</a>, <a href="/tags#relateiq">relateiq</a>
</p>
<p>
On this day
(in 1997): The first episode of the American animated series South Park premiered on Comedy Central.
</p>
</div>
</aside>

</div>
</div>
<div class='footer-container'>
<footer class='wrapper'>
<ul>
<li>
<a href='/'>
<i class='fa fa-home fa-2x'></i>
</a>
</li>
<li>
<a href='mailto:beamneocube@gmail.com' target='_blank'>
<i class='fa fa-envelope fa-2x'></i>
<span class='sitename'>
Email
</span>
</a>
</li>
<li>
<a href='https://www.github.com/xavdid' target='_blank'>
<i class='fa fa-github-alt fa-2x'></i>
<span class='sitename'>
GitHub
</span>
</a>
</li>
<li>
<a href='https://www.twitter.com/xavdid' target='_blank'>
<i class='fa fa-twitter-square fa-2x'></i>
<span class='sitename'>
Twitter
</span>
</a>
</li>
<li>
<a href='https://www.linkedin.com/in/xavdid' target='_blank'>
<i class='fa fa-linkedin-square fa-2x'></i>
<span class='sitename'>
Linkedin
</span>
</a>
</li>
</ul>
</footer>
</div>
</div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-40842533-1', 'davidbrownman.com');
  ga('send', 'pageview');
</script>
</body>
